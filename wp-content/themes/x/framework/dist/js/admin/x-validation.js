var xValidationData=function(e){var t={};function a(n){if(t[n]){return t[n].exports}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,a);o.l=true;return o.exports}a.m=e;a.c=t;a.d=function(e,t,n){if(!a.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:n})}};a.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};a.d(t,"a",t);return t};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=0)}([function(e,t,a){"use strict";var n=a(1);var o=r(n);var i=a(2);var s=r(i);function r(e){return e&&e.__esModule?e:{default:e}}var c=window.xValidationData;s.default.addDataSource(c);(function(){if(!c.modules||!c.notices){return}for(var e in c.modules){var t=c.modules[e];if(t.notices){for(var a in t.notices){if(-1!==c.notices.indexOf(a)){s.default.showNotice(t.notices[a])}}}}})();s.default.addModule("x-auto-configure-cornerstone",function(e,t,a){var n=e.data("tco-module-state");if("install"===n){o()}if("activate"===n){i()}function o(){s.default.ajax({action:"x_auto_install_cornerstone",done:function e(t){i(function(){c(t)})},fail:r})}function i(e){s.default.ajax({action:"x_auto_activate_cornerstone",done:"function"===typeof e?e:c,fail:r})}function r(e){if(!e||!e.message){var t={message:a.errors[n]||a.errors.install};if(e.status&&e.statusText){t.errorDetails=e.status+" "+e.statusText}e=t}c(e)}function c(e){if(!e){return}if(e.message){var t=s.default.showNotice(e.message)}if(t&&e.errorDetails){t.find("[data-tco-error-details]").click(function(t){t.preventDefault();s.default.confirm({message:e.errorDetails,acceptBtn:"",declineBtn:a.errorBack,class:"tco-confirm-error"})})}}});s.default.addModule("x-validation",function(e,t,a){var n=t["message"]||false,i=t["button"]||false,r=t["overlay"]||false,c=t["input"]||false,l=t["form"]||false,d=t["preload-key"]||false;if(!n||!i||!r||!c||!l||!d){return}l.on("submit",function(t){t.preventDefault();c.prop("disabled",true);e.tcoShowMessage(a.verifying);s.default.ajax({action:"x_validation",code:c.val(),done:f,fail:g})});var u=d.val();if("string"===typeof u&&u.length>1){c.val(u);l.submit()}function f(t){if(!t.message){return g(t)}if(t.complete){e.tcoShowMessage(t.message);setTimeout(p,2500)}else{m(t)}}function m(t){n.html(t.message);i.html(t.button);var a=650;setTimeout(function(){e.tcoShowMessage("")},a*2);setTimeout(function(){r.addClass("tco-active")},a*3);if(t.url){i.attr("href",t.url);if(t.newTab){i.attr("target","_blank")}}else{i.attr("href","#")}i.off("click");if(t.dismiss){i.click(function(){r.removeClass("tco-active");e.tcoRemoveMessage();setTimeout(function(){c.val("").prop("disabled",false)},a*2)})}}function p(){var e=s.default.queryString.parse(window.location.search);delete e["tco-key"];e.notice="validation-complete";window.location.search=s.default.queryString.stringify(e)}function g(e){var t=e.message?e.message:e;if(t.responseText){t=t.responseText}m({message:a.error,button:a.errorButton,dismiss:true});n.find("[data-tco-error-details]").click(function(e){e.preventDefault();s.default.confirm({message:t,acceptBtn:"",declineBtn:a.errorButton,class:"tco-confirm-error"})});console.log(e)}(0,o.default)("body").on("click",'a[data-tco-focus="validation-input"]',function(e){e.preventDefault();c.focus()})});s.default.addModule("x-validation-revoke",function(e,t,a){var n=t["revoke"]||false;if(!n){return}n.click(function(){s.default.confirm({message:a.confirm,acceptClass:"tco-btn-nope",acceptBtn:a.accept,declineBtn:a.decline,accept:function e(){n.removeAttr("href");n.html(a.revoking);s.default.ajax({action:"x_validation_revoke",done:o,fail:o})}})});function o(){var e=s.default.queryString.parse(s.default.queryString.extract(window.location.href));delete e["tco-key"];e.notice="validation-revoked";window.location.search=s.default.queryString.stringify(e)}});s.default.addModule("x-automatic-updates",function(e,t,a){var n=t["check-now"]||false,o=t["latest-available"]||false;if(!n||!o){return}if(a.latest){o.html(a.latest)}n.find("a").click(function(e){e.preventDefault();n.html(a.checking);s.default.ajax({action:"x_update_check",done:function e(t){if(t.latest&&t.latest!==a.latest){n.html(a.completeNew);o.html(t.latest)}else{n.html(a.complete)}},fail:function e(t){console.warn("X Update Check Error",t);n.html(a.error)}})})});s.default.addModule("x-theme-options-manager",function(e,t,a){var n=t["import-form"]||false,o=t["import-file"]||false,i=t["export"]||false,r=t["reset"]||false;if(!n||!o||!i||!r){return}i.on("click",function(){e.tcoShowMessage(a.export,1500)});if(f()){n.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault();e.stopPropagation()}).on("dragover dragenter",function(){n.addClass("tco-dragover")}).on("dragleave dragend drop",function(){n.removeClass("tco-dragover")}).on("drop",function(e){c(e.originalEvent.dataTransfer.files[0])});o[0].onchange=function(){c(this.files[0])}}else{e.tcoShowMessage(a.useModernBrowser,2500)}function c(e){s.default.confirm({message:a.importConfirm,acceptClass:"tco-btn-nope",acceptBtn:a.yep,declineBtn:a.nope,accept:function t(){l(e)},decline:function e(){u()}})}function l(t){e.tcoShowMessage(a.importBegin);var n=new FileReader;n.onload=function(){try{JSON.parse(n.result);d(n.result)}catch(t){e.tcoShowMessage(a.importError,2500);console.log("X Customizer Manager Import Error",t)}};try{n.readAsText(t)}catch(t){e.tcoShowMessage(a.importError,2500);console.log("X Customizer Manager Import Error",t)}}function d(t){s.default.ajax({action:"x_theme_options_manager_import",import:t,done:function t(){e.tcoShowMessage(a.importSuccess,2500);u()},fail:function t(n){console.warn("X Customizer Import Error",n);e.tcoShowMessage(a.importError,2500);u()}})}function u(){o[0].value="";o[0].type="";o[0].type="file"}r.click(function(t){t.preventDefault();s.default.confirm({message:a.resetConfirm,acceptClass:"tco-btn-nope",acceptBtn:a.yep,declineBtn:a.nope,accept:function t(){e.tcoShowMessage(a.resetBegin);s.default.ajax({action:"x_theme_options_manager_reset",done:function t(){e.tcoShowMessage(a.resetSuccess,2500)},fail:function t(n){console.warn("X Customizer Reset Error",n);e.tcoShowMessage(a.resetError,2500)}})}})});function f(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}});s.default.addModule("x-demo-content",function(e,t,a){var n=t["select"]||false,i=t["select-group-expanded"]||false,r=t["select-group-standard"]||false,c=t["demo-link"]||false,l=t["setup-button"]||false;if(!n||!i||!r||!c||!l){return}o.default.each(a.demos.expanded_demos,function(e,t){i.append(d(e,t,"expanded"))});o.default.each(a.demos.standard_demos,function(e,t){r.append(d(e,t,"standard"))});function d(e,t,a){return(0,o.default)('<option data-demo-type="'+a+'" value="'+e+'">'+t.title+"</option>")}f();n.on("change",f);function u(){var e=n.find(":selected");var t="expanded"===e.data("demo-type");var o=t?"expanded_demos":"standard_demos";var i=e.val();var s=a.demos[o][i]||{};s.name=i;s.expanded=t;return s}function f(){var e=u();c.attr("href",e.demo_url)}l.click(function(e){e.preventDefault();s.default.confirm({message:a.strings.confirm,acceptClass:"tco-btn-nope",acceptBtn:a.strings.yep,declineBtn:a.strings.nope,accept:m})});function m(){var e=u();x.init({demo:e.expanded?e.name:e.url},e.expanded)}function p(e){l.prop("disabled",!e)}var g=function e(){this.$el=(0,o.default)(this.markup);this.$message=this.$el.find(".tco-progress-title");this.$bar=this.$el.find(".tco-progress-bar-inner")};o.default.extend(g.prototype,{markup:'<div class="tco-modal-outer">'+'<div class="tco-modal-inner">'+'<div class="tco-progress">'+'<div class="tco-progress-title"></div>'+'<div class="tco-progress-bar-outer">'+'<div class="tco-progress-bar-inner"></div>'+"</div>"+"</div>"+'<div class="tco-progress-complete">'+'<div class="tco-progress-complete-icon dashicons dashicons-yes"></div>'+'<div class="tco-progress-complete-title">'+a.strings.complete+"</div>"+"</div>"+"</div>"+"</div>",start:function e(){this.message(a.strings.start);this.$el.addClass("tco-processing");(0,o.default)("body").prepend(this.$el);setTimeout(function(){this.$el.addClass("tco-active")}.bind(this),0);this.setProgress(0)},message:function e(t){this.$message.html(t)},setProgress:function e(t){t=t*.9+.1;this.$bar.css("width",Math.round(t*100)+"%")},simulateProgress:function e(){this.message(a.strings.simulated);this.$bar.animate({width:"80%"},250)},complete:function e(){this.message("&nbsp;");this.$bar.animate({width:"100%"},250);setTimeout(function(){this.$el.removeClass("tco-processing");this.close()}.bind(this),400)},fail:function e(t){this.message(t);this.close()},close:function e(){setTimeout(function(){this.$el.removeClass("tco-active")}.bind(this),1500);setTimeout(function(){this.$el.detach();this.setProgress(0);this.message("")}.bind(this),2e3)}});var v=function e(){};o.default.extend(v.prototype,{init:function e(t,a){this.demoData=t;this.demoData.action=a?"x_demo_importer":"x_demo_content_setup";this.demoData.attempts=1;this.demoData._tco_nonce=window.tcoCommon._tco_nonce;if(!a){return this.runStandard()}this.demoData.session="s_"+Math.round((new Date).getTime()+Math.random()*100);h.start();p(false);this.acknowledge({data:{},first:true})},runStandard:function e(){h.start();h.simulateProgress();p(false);this.standardProcess(function(e){if(e.success===false){return this.failure(e.data.message,e)}h.complete();p(true)}.bind(this))},standardProcess:function e(t){o.default.post(window.ajaxurl,this.demoData,t).fail(function(e){h.message(this.timeOutMessage(this.demoData.attempts++));if(this.demoData.attempts>=25){return this.failure(e.strings.failure,e)}this.standardProcess(t)}.bind(this))},acknowledge:function e(t){if(!t.data&&!t.first){h.message(this.timeOutMessage(this.demoData.attempts++));if(this.demoData.attempts>25){return this.failure(a.strings.failure,t)}}else{this.demoData.attempts=0;if(false===t.success){return this.failure(t.data.message,t.data)}if(t.data.message){h.message(t.data.message)}if(t.data.debug_message&&a.strings.debug){console.log("X Demo Debug",t.data.debug_message,t.data.debug||null)}if(t.data.completion&&t.data.completion===true){if(t.data.debug&&a.strings.debug){console.log(t.data.debug)}return this.complete()}if(t.data.completion){h.setProgress(t.data.completion.ratio)}}setTimeout(function(){o.default.post(window.ajaxurl,this.demoData).always(this.acknowledge.bind(this))}.bind(this),40*this.demoData.attempts)},complete:function e(){h.complete();p(true)},failure:function e(t,a){h.fail(t);p(true);console.error("X Demo Importer failure",a||{})},timeOutMessage:function e(t){if(t>20){return a.strings.timeout3}if(t>10){return a.strings.timeout2}return a.strings.timeout1}});var h=new g;var x=new v});s.default.addModule("x-extension",function(e,t,a){var n=t["manage"]||false;var o=e.attr("id");var i="undefined"!==typeof e.data("x-extension")?a.extensions[o]:a.approvedPlugins[o];if(!n||!i){return}if(i.activated){n.html(a.activated).addClass("tco-btn-yep tco-btn-disabled");return}else if(i.installed){n.html(a.activate)}if(!window._xExtensionQueue){window._xExtensionQueue={running:false,queue:[]}}n.on("click",r);function r(){n.prop("disabled",true);var t="install";if(i.installed)t="activate";if(i.activated)t="deactivate";if(window._xExtensionQueue.running){e.tcoShowMessage(l[t]);window._xExtensionQueue.queue.unshift(d[t])}else{d[t]();window._xExtensionQueue.running=true}}function c(){if(0<window._xExtensionQueue.queue.length){var e=window._xExtensionQueue.queue.pop();e()}else{window._xExtensionQueue.running=false}}var l={install:"Waiting to install&hellip;",activate:"Waiting to activate&hellip;"};var d={install:function t(){e.tcoShowMessage("Installing&hellip;");var o=function t(o){n.html(a.activate);e.tcoRemoveMessage(false,function(){e.removeClass("tco-extension-not-installed").addClass("tco-extension-installed")});i.installed=true;c()};s.default.ajax({action:"x_extensions_install",plugin:i.plugin,package:i.package,slug:i.slug,done:o,fail:u})},activate:function t(){e.tcoShowMessage("Activating&hellip;");var o=function t(o){console.log("Installed",o);n.html(a.installed);e.tcoRemoveMessage(false,function(){n.html(a.activated).addClass("tco-btn-yep tco-btn-disabled")});i.activated=true;c()};s.default.ajax({action:"x_extensions_activate",plugin:i.plugin,done:o,fail:u})}};function u(t){var n=t.message?t.message:t;if(n.responseText){n=n.responseText}e.tcoShowErrorMessage(a.error,n);console.log(t);c()}})},function(e,t){e.exports=window.jQuery},function(e,t){e.exports=window.tco}]);
//# sourceMappingURL=x-validation.js.map